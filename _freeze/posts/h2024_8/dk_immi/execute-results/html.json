{
  "hash": "1f7fd0d4407739fc31c3311e244444f9",
  "result": {
    "markdown": "---\n    title: 'A Fresh Start in Aarhus!'\n    date: '2024-08-30'\n    categories: ['Aarhus', 'Denmark', 'Personal']\n    description: 'In September, I will begin as a PhD Student at the Department of Political Science at Aarhus University!'\n    execute: \n      message: false\n      warning: false\n    editor_options: \n      chunk_output_type: console\n    format:\n      html:\n        code-fold: true\n        code-summary: \"Show the code\"\n        from: markdown+emoji\n---\n\n\n# Personal News\n\nHej! \n\nIn this month's visualisations, I've chosen a highly personal theme: I'm thrilled to announce that I will begin as a PhD Student at the Department of Political Science at Aarhus University in September. I'll slightly change my focus from Comparative Politics to Comparative Political Behaviour. Needless to say, I am very excited about what lies ahead!!!\n\nTo get off to a quick start, I've made two plots about immigration in Denmark. The first centres on the distribution of the immigrant population across Denmark's municipalities, and the second centres on which municipalities have the highest # of Brazilians. \n\n::: callout-warning\n## Warning\n\nNote that I focus on raw numbers and not on numbers per capita. As such, obviously, populous municipalities tend to have a higher number of immigrants and higher numbers of Brazilians!\n:::\n\n# Visualisations\n\n![Immigrants Across Denmark](dk_aarhus.png)\n\nIn the above map, we can see that a sizable share of immigrants is concentrated in København. Roughly 20% of immigrants are there. Aarhus comes second with 6%, followed by Odense with ~3%, and Aalborg with ~2.7%\n\n\n\n![Brazilians in Denmark](bra_imt.png)\n\nNot surprisingly, this order almost repeats when we look exclusively at the dispersion of Brazilian immigrants. The difference is that Odense falls to the 5th place, while Aalborg comes in 3rd and Frederiksberg in 4th. \n\nVi ses!\n\n\n### Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\n##before you proceed, you should download the data from https://www.dst.dk/en/Statistik/emner/borgere/befolkning/befolkningstal\n\n#Load packages\nlibrary(ggtext)\nlibrary(mapDK)\nlibrary(ragg)\nlibrary(readxl)\nlibrary(showtext)\nlibrary(sf)\nlibrary(tidyverse)\n\n#Data Wrangling\nimmigration <- read_xlsx(\"20248323147475147100FOLK1B.xlsx\") %>% \n               janitor::clean_names() %>%\n               select(x3, x4, x5) %>%\n               filter(x5 != \"2024Q2\") %>%\n               fill(x3, .direction = \"down\") %>%\n               mutate(x5 = as.numeric(x5)) %>%\n               filter(x4 != \"Total\") %>%\n               filter(x4 != \"Denmark\") %>%\n               mutate(total = sum(x5)) %>%\n               group_by(x3) %>%\n               mutate(per_mun = sum(x5),\n                      per_per = per_mun/total) %>%\n               ungroup() %>%\n               select(-x4, -x5) %>%\n               unique() %>%\n               arrange(desc(per_per)) %>%\n               mutate(id = tolower(x3),\n                      id = str_replace_all(id, \"ø\", \"oe\"),\n                      id = str_replace_all(id, \"-\", \" \"),\n                      id = str_replace_all(id, \"æ\", \"ae\"),\n                      id = str_replace_all(id, \"å\", \"aa\")) %>%\n               mutate(id = ifelse(id == \"copenhagen\", \"koebenhavn\", id))\n\nsubset_im <- immigration %>%\n             select(id, per_per)\n\n\nmapdk <- mapDK()$data %>%\n         left_join(subset_im, by = \"id\")\n\n\nmapdk1 <- mapdk %>% select(id) %>% unique()\n\n\nmapdk_sf <- st_as_sf(mapdk, coords = c(\"long\", \"lat\"), crs = 4326)\n\n#Font\nfont_add(family = \"regular\", \"Futura Book.ttf\")\nfont_add(family = \"bold\", \"Futura Bold.ttf\")\nshowtext_auto() \n\n\n#plot\ndk <- mapDK(values = \"per_per\", id = \"id\", data = mapdk) +\n      scale_fill_gradient(low = \"#ecbebe\", high = \"#5f1313\",\n                          name = \"Dispersion of Immigrants\",\n                          guide = guide_legend(title.position = \"top\",\n                                               nrow = 1,\n                                               keyheight = unit(3, units = \"mm\"),\n                                               keywidth = unit(12, units = \"mm\"),\n                                               label.position = \"bottom\")) +\n      geom_polygon(data = mapdk, aes(x = long, y = lat, group = group, fill = per_per), color = \"white\") +\n      geom_polygon(data = mapdk %>% filter(id == \"aarhus\"), aes(x = long, y = lat, group = group), \n                   fill = NA, color = \"black\", linewidth = 1.5) +\n      coord_sf(expand = T) +\n      labs(title = \"Distribution of the Immigrant Population in Denmark as of Q2/2024\",\n           subtitle = \"<span style='color:#3e3131'>**Aarhus**</span> is the second municipality with most immigrants!\",\n           caption = \"Lucas Couto | Twitter: @lucas_coutoz | Data: Statistics Denmark\") +\n      theme(##Title, Subtitle, Caption\n            plot.title = element_text(family = \"bold\", hjust = 0.5, vjust = 0.5, size = 25, color = \"black\"),\n            plot.title.position = \"plot\",\n            plot.subtitle = element_markdown(family = \"regular\", hjust = 0.5, vjust = 0.5, size = 20, color = \"black\"),\n            plot.caption = element_text(family = \"bold\", size = 15, color = \"black\", hjust = 0.5, vjust = 0.5),\n            plot.caption.position = \"plot\",\n            ##Background\n            panel.border = element_blank(),\n            panel.grid.major = element_blank(),\n            panel.grid.minor = element_blank(),\n            plot.background = element_rect(fill = \"#faf0f0\", linetype = 'blank'),\n            #plot.margin = margin( , 0.5, , , \"cm\"),\n            panel.background = element_rect(fill = \"#faf0f0\"),\n            ##Axes\n            axis.text = element_blank(),\n            axis.ticks = element_blank(),\n            ##Legend\n            legend.title = element_text(family = \"regular\", size = 15, hjust = 0.5, vjust = 0.5),\n            legend.position = \"top\",\n            legend.background = element_rect(fill = \"#faf0f0\"),\n            legend.text = element_text(family = \"regular\", size = 15),\n            legend.key = element_rect(fill = \"#faf0f0\"))\n\n#size: 12x8\n\n#Data Wrangling II\nbra <- read_xlsx(\"20248323147475147100FOLK1B.xlsx\") %>% \n       janitor::clean_names() %>%\n       select(x3, x4, x5) %>%\n       filter(x5 != \"2024Q2\") %>%\n       fill(x3, .direction = \"down\") %>%\n       mutate(x5 = as.numeric(x5)) %>%\n       filter(x4 == \"Brazil\") %>%\n       arrange(desc(x5)) %>%\n       slice(1:10) %>%\n       mutate(x3 = fct_reorder(x3, x5))\n\n#Font\nfont_add(family = \"regular\", \"GlacialIndifference-Regular.otf\")\nfont_add(family = \"bold\", \"GlacialIndifference-Bold.otf\")\nshowtext_auto() \n\n\nbra_imt <- bra %>% ggplot(aes(x3, x5)) +\n                   geom_bar(stat = \"identity\", width = 0.9, fill = \"#009739\") +\n                   geom_text(aes(x = x3, y = x5, fontface = 2, label = x5), \n                                 position = position_dodge(width = 1), colour = \"#009739\", \n                                 hjust = -0.08, size = 20) + \n                   ylim(0, 1700) +\n                   coord_flip(expand = FALSE) +\n                   labs(title = \"Danish municipalities with the highest number of Brazilians as of Q2/2024\",\n                        x = \"\",\n                        y = \"# of Brazilians\",\n                        caption = \"Lucas Couto | Twitter: @lucas_coutoz | Data: Statistics Denmark\") +\n                   theme(#Title, Subtitle, Caption\n                         plot.title = element_markdown(family = \"bold\", hjust = 0.5, vjust = 0.5, size = 45, color = \"#009739\"),\n                         plot.title.position = \"plot\",\n                         plot.subtitle = element_markdown(family=\"regular\", size = 25, hjust = 0.5, color = \"#009739\"),\n                         plot.caption = element_text(family=\"bold\", size = 30, color = \"#009739\", hjust = 1),\n                         plot.caption.position = \"plot\",\n                         #Panel and Background\n                         panel.border = element_blank(),\n                         panel.grid.major = element_blank(),\n                         panel.grid.minor = element_blank(),\n                         panel.background = element_rect(fill = \"#ccead7\"),\n                         plot.background = element_rect(fill = \"#ccead7\", linetype = 'blank'),\n                         #Axes\n                         axis.title = element_text(size = 40, family = \"regular\", color = \"#009739\"),\n                         axis.text.y = element_markdown(size = 35, family = \"bold\", color = \"#009739\"),\n                         axis.text.x = element_text(size = 25, family = \"regular\", color = \"#009739\"),\n                         axis.ticks = element_blank(),\n                         axis.line = element_blank(),\n                         #Plus\n                         text = element_text(family = \"regular\", size = 45),\n                         legend.position = \"none\")\n\nggsave(\"bra_imt.png\",\n       plot=bra_imt,\n       device = agg_png(width = 8, height = 6, units = \"in\", res = 300))\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}